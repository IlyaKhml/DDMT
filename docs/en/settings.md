<!-- (Automatically translated via ChatGPT.) -->

<p align='center'>
    <a href='..\ru\settings.md'>RU</a> • <b>EN</b> • <a href='..\zh\settings.md'>ZH</a>
</p>
<p align='center'>
    <a href='README.md'>Main</a> • 
    <b>Documentation</b> • <a href='how_it_works.md'>How does it work?</a> • <a href='qa.md'>Questions</a>
</p>

# Settings

| Key                                 | Value Type        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Example Value                                                        |
| ----------------------------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------- |
| `'target_languages'`                | `List(str)`       | Languages to translate the mod into.<br><br>Specify languages supported by the **translator**.                                                                                                                                                                                                                                                                                                                                                                                                                                 | `['english']`<br>`['russian', 'english', 'schinese']`                            |
| `'mod_folder_path'`                 | `str`             | Path to the mod folder to be translated.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `r'G:\SteamLibrary\steamapps\common\DarkestDungeon\mods\2200558948'` |
| `'translate_xml_language_priority'` | `List(str)`       | Priority for selecting the `.xml` file for translation (if multiple `.xml` files exist).<br><br>Searches for languages in order, first by `.xml` file name, then by the `id` of the `<language>` tag in the `.xml`.<br>Translation starts once a language from the list is found.<br><br>If no listed language is found, it uses the first available language.<br><br>Useful for prioritizing a language with a complete translation if others are incomplete.<br><br>Specify languages supported by the **game**. | `['schinese']`<br>`['schinese', 'english']`                           |
| `'copy_loc2_without_translate'`     | `bool`            | Flag to determine whether to translate the `.xml` or simply copy a `.loc2` file with a language from `LOC2_TRANSLATE_PRIORITY`.<br>If set to `True`, it will only copy.                                                                                                                                                                                                                                                                                                                                                        | `True`<br>`False`                                                    |
| `'loc2_translate_priority'`         | `List(str)`       | Priority for selecting `.loc2` files to copy (languages earlier in the list have higher priority).<br><br>Selects the first `.loc2` file found with a language from the list in its name.<br><br>In simple terms, a list of languages you’d be happy to see in the game if translation isn’t possible.<br><br>Specify languages supported by the **game**.                                                                                                             | `['english']`<br>`['english', 'schinese']`                           |
| `'suffix_to_mod_title'`             | `str`             | What to append to the translated mod’s title.<br><br>Ignored if `'new_mod_title'` is specified.                                                                                                                                                                                                                                                                                                                                                                                                                                | `'Translated'`<br>`''`                                               |
| `'new_mod_title'`                   | `str` or `False`  | New title for the mod if you want to fully rename it.<br><br>If set to `False`, the suffix from `'suffix_to_mod_title'` is added.<br><br>If a value is specified, the suffix from `'suffix_to_mod_title'` is ignored.                                                                                                                                                                                                                                                                                                         | `'ModName Translated'`<br>`False`                                    |
| `'translator'`                      | `str`             | Translator used for translating strings from `.xml`.<br><br>Supports API from `OpenAI`.                                                                                                                                                                                                                                                                                                                                                                                                                                        | `'GoogleTranslator'`<br>`'DeeplTranslator'`<br>`'OpenAI'`            |
| `'translator_api_key'`              | `str`             | API key for the `'translator'`.<br><br>Not used for `GoogleTranslator`.                                                                                                                                                                                                                                                                                                                                                                                                                                                        | *Depends on the translator*                                          |
| `'translator_mode'`                 | `str`             | Mode for splitting strings sent to the translator. See "Translation Modes" for details.                                                                                                                                                                                                                                                                                                                                                                                                                                         | `'raw'`<br>`'optimal'`<br>`'deepl_mustache'`                         |
| `'translator_source_lang'`          | `str` or `False`  | Specifies the source language of the text:<br><br>`False` - Use the language from the `.xml` file.<br><br>`'auto'` - Automatic detection by the translator (only for `GoogleTranslator`).                                                                                                                                                                                                                                                                                                                                        | `False`<br>`'Auto'`                                                  |
| `'translator_model'`                | `str`             | Translation model to specify in the request.<br><br>(Used if `'translator'` is `OpenAI` or another LLM API).                                                                                                                                                                                                                                                                                                                                                                                                                   | `gpt-4o-mini`                                                        |
| `'translator_settings'`             | `dict`            | Settings for the LLM API model or other provider.<br><br>Settings are passed to `LLMClient.py`, and processing depends on the API used.                                                                                                                                                                                                                                                                                                                                                                                         | `{}`                                                                 |
| `'translator_debug'`                | `bool`            | Enable debug messages.<br><br>(Shows strings sent to the translator).                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `True`<br>`False`                                                    |
| `'translate_comments'`              | `bool`            | Whether to translate comments in `.xml` files.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `True`<br>`False`                                                    |
| `'force_overwrite_loc2'`            | `bool`            | Whether to overwrite all `.loc2` files in the `localization` folder.<br><br>`True` - Overwrite all `.loc2` files.<br>`False` - Overwrite only files for the translated languages (`target_languages`).                                                                                                                                                                                                                                                                                                                            | `True`<br>`False`                                                    |
| `'use_language_detector'`           | `bool`            | Whether to use a language detector for each string sent to the translator.<br><br>Useful if strings within language tags in the `.xml` file are in different languages (incomplete translation).<br><br>Used for `GoogleTranslator` and `DeeplTranslator`.<br><br>Requires an API key to function.                                                                                                                                                                                                                              | `True`<br>`False`                                                    |
| `'language_detector_api_key'`       | `str`             | API key for the language detector.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |    |


# Translation Modes
Original strings for formatting example:
1. `{colour_start|guard} Guard {colour_end}`
2. `On Attack: Add 3~6 true Dmg and {colour_start|elaina_purpledawn} steal {colour_end} 25%%Spd from target`

| Mode               | Description and Features                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Text Sent to Translator                                                                                                                              |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| `'raw'`            | The string is sent "as is" without changes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `{colour_start\|guard} Guard {colour_end}`<br><br>`On Attack: Add 3~6 true Dmg and {colour_start\|elaina_purpledawn} steal {colour_end} 25%%Spd from target` |
| `'optimal'`        | Splits strings into parts between "non-translatable structures."<br>After translation, reassembles the string, preserving non-translatable structures.<br><br>Suitable for translators that might replace/translate/omit parts of the string we want to keep in the original form.<br><br>The most economical translation method in terms of character count.                                                                                                  | `Guard`<br><br>`On Attack: Add 3~6 true Dmg and`<br><br>`steal`<br><br>`25%%Spd from target`                                                          |
| `'deepl_mustache'` | Replaces parts of the text that shouldn’t be translated with unique identifiers, then sends the string to the translator.<br><br>After receiving the translation, replaces the identifiers back.<br><br>Originally added for the DeepL translator, as it supports such structures (won’t translate them).<br><br>If using this mode, ensure the translator doesn’t distort or exclude unique identifiers in the response. | `<m id=1/> Guard <m id=2/>`<br><br>`On Attack: Add 3~6 true Dmg and <m id=1/> steal <m id=2/> 25%%Spd from target`                                  |

# Translators
Below is a comparison table of several translators (tested by me) and a table of supported languages.

| Translator         | Best Formatting Mode                                                                 | Translation Quality and Features                                                                                                                                                                                                                   | Cost                                                                                                                                                              | Requires API Key |
| ------------------ | ----------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- |
| `GoogleTranslator` | Best to use `optimal`.<br><br>`raw` and `deepl_mustache` yield poor results.         | Low quality, but fast and free.<br><br>Suitable for joke translations or to replace blue inscriptions with something.<br><br>Works fine for simple text.<br><br>Has an `auto` mode for detecting the source language. | Free                                                                                                                                                              | ❌ No            |
| `DeeplTranslator`  | Best to use either `deepl_mustache` or `optimal` (for efficiency).                   | Medium/high quality.                                                                                                                                                                                                                               | **Free:** 500,000 characters per month.<br><br>With Pro subscription, $25.00 per 1,000,000 characters.<br><br>[Pricing](https://www.deepl.com/en/pro/change-plan#developer) | ✔️ Yes           |
| `DeepSeek-R1`      | `deepl_mustache` with a prompt suited for the formatting type.                       | High/medium quality.                                                                                                                                                                                                                               | *Depends on the provider.*                                                                                                                                        | ✔️ Yes           |
| `gpt-4o-mini`      | *Depends on the prompt.* For best translation, use `deepl_mustache`.                 | High/medium quality.                                                                                                                                                                                          | *Depends on the provider.*                                                                                                                                        | ✔️ Yes           |
| Other LLMs         | *Depends on the prompt.*                                                            | *Depends on the model.*<br><br>Can be configured for a specific provider in `LLMClient.py`.                                                                                                                                                       | *Depends on the provider.*<br><br>With resources and desire, models can be deployed locally for free translation.                                                  | ❓ *Possibly*     |

| Translator         | Supported languages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `GoogleTranslator` | `['afrikaans', 'albanian', 'amharic', 'arabic', 'armenian', 'assamese', 'aymara', 'azerbaijani', 'bambara', 'basque', 'belarusian', 'bengali', 'bhojpuri', 'bosnian', 'bulgarian', 'catalan', 'cebuano', 'chichewa', 'chinese (simplified)', 'chinese (traditional)', 'corsican', 'croatian', 'czech', 'danish', 'dhivehi', 'dogri', 'dutch', 'english', 'esperanto', 'estonian', 'ewe', 'filipino', 'finnish', 'french', 'frisian', 'galician', 'georgian', 'german', 'greek', 'guarani', 'gujarati', 'haitian creole', 'hausa', 'hawaiian', 'hebrew', 'hindi', 'hmong', 'hungarian', 'icelandic', 'igbo', 'ilocano', 'indonesian', 'irish', 'italian', 'japanese', 'javanese', 'kannada', 'kazakh', 'khmer', 'kinyarwanda', 'konkani', 'korean', 'krio', 'kurdish (kurmanji)', 'kurdish (sorani)', 'kyrgyz', 'lao', 'latin', 'latvian', 'lingala', 'lithuanian', 'luganda', 'luxembourgish', 'macedonian', 'maithili', 'malagasy', 'malay', 'malayalam', 'maltese', 'maori', 'marathi', 'meiteilon (manipuri)', 'mizo', 'mongolian', 'myanmar', 'nepali', 'norwegian', 'odia (oriya)', 'oromo', 'pashto', 'persian', 'polish', 'portuguese', 'punjabi', 'quechua', 'romanian', 'russian', 'samoan', 'sanskrit', 'scots gaelic', 'sepedi', 'serbian', 'sesotho', 'shona', 'sindhi', 'sinhala', 'slovak', 'slovenian', 'somali', 'spanish', 'sundanese', 'swahili', 'swedish', 'tajik', 'tamil', 'tatar', 'telugu', 'thai', 'tigrinya', 'tsonga', 'turkish', 'turkmen', 'twi', 'ukrainian', 'urdu', 'uyghur', 'uzbek', 'vietnamese', 'welsh', 'xhosa', 'yiddish', 'yoruba', 'zulu']` |
| `DeeplTranslator`  | `['bulgarian', 'czech', 'danish', 'german', 'greek', 'english', 'spanish', 'estonian', 'finnish', 'french', 'hungarian', 'indonesian', 'italian', 'japanese', 'lithuanian', 'latvian', 'dutch', 'polish', 'portuguese', 'romanian', 'russian', 'slovak', 'slovenian', 'swedish', 'turkish', 'ukrainian', 'chinese']`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `LLM`              | *Depends on the model*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

# Language Detectors

Why is a language detector needed?  
Suppose we have a mod that is partially translated. In that case, the `.xml` file may contain strings in two or more languages (in the worst case).  

In each request to the translator, we specify the source language and the target language for translation. If we provide the wrong source language, the translator may fail to translate the text accurately.  

To ensure the correct source language is used, we can detect the language of each string sent to the translator.  

For `DeeplTranslator`, which lacks an automatic language detection mode via API, this can significantly improve translation quality.

| Language Detector                                 | Quality Assessment                                                                                                                                                                                                                                                     | Cost                                                                                                                                              | Requires API Key |
| ------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- |
| [detectlanguage.com](https://detectlanguage.com/) | Short strings may not always be identified correctly. It may confuse Japanese with Chinese or return a different language instead of English.<br>Better than nothing for `DeepL`, but additional handling of misidentified languages may be required. | Free tier:<br>1,000 requests/day<br>1 MB/day<br><br>[Other paid plans available.](https://detectlanguage.com/private/plan_changes/new) | ✔️ Yes           |

# Game-Supported Languages
Approximate list of languages supported by the game:

`['brazilian', 'czech', 'english', 'french', 'german', 'italian', 'japanese', 'koreana', 'koreanb', 'polish', 'russian', 'schinese', 'spanish', 'tchinese']`

This may not be a complete list, and if you’re confident a language is supported by the game, you can try using it.